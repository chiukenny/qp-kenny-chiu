\documentclass[10pt]{article}
\input{../doc/report/header}
\input{../doc/report/defs}

\begin{document}

\section{Proposal scratch notes}

\begin{itemize}

\item
$\calD$, $\calI$: (unknown) disjoint sets of indices that describe the groups of transformations that are relevant and irrelevant to the output, respectively. $\calD\cup\calI=\{1,\ldots,m\}$.

\item
$U_Y$, $U_\calI$, $U_\calD$, $\tildeU_\calI$: independent latent variables that influence the value of the variable(s) that they point to.

\item
$X^{\text{(hid)}}$: some unknown canonical form of the observed input $X$.  It is assumed that given $U_\calD$ and $U_\calI$, $X$ was obtained from an ordered sequence of transformations on the canonical form, i.e.,
\[
X=T_{U_\calD,U_\calI}\circ X^{\text{(hid)}}
\]
where transformations
\[
T_{U_\calD,U_\calI}=T_\calI^{(1)}\circ T_\calD^{(1)}\circ T_\calI^{(2)}\circ\ldots
\]
make up the overgroup $\calG_{\calD\cup\calI}$, $T_\calD^{(j)}$ is a transformation in group $\calG_j$ from the overgroup $\calG_\calD=\langle\cup_{j\in\calD}\calG_j\rangle$, and $T_\calI^{(i)}\in\calG_i\subset\calG_\calI=\langle\cup_{i\in\calI}\calG_i\rangle$. Note that $\calG_\calI$ is also assumed to be a normal subgroup of $\calG_{\calD\cup\calI}$.

\item
$Y$: observed output assumed to be generated by
\[
Y = h(X^{\text{(hid)}},U_\calD,U_Y)
\]
where $h$ is a deterministic function.

\item
$X_{U_\calI\leftarrow\tildeU_\calI}$: counterfactual variable to $X$ where $U_\calI$ has been replaced by $\tildeU_\calI$, i.e.,
\[
X_{U_\calI\leftarrow\tildeU_\calI} = T_{U_\calD,\tildeU_\calI}\circ X^{\text{(hid)}} \;.
\]

\item
Want CG-invariant representation
\[
\Gamma(X) = \Gamma(T_{U_\calD,U_\calI}\circ X^{\text{(hid)}}) = \Gamma(T_{U_\calD,\tildeU_\calI}\circ X^{\text{(hid)}}) =  \Gamma(X_{U_\calI\leftarrow\tildeU_\calI})
\]
When $\calG_\calI$ is a normal subgroup of $\calG_{\calD\cup\calI}$, G-invariant representation
\[
\Gamma(X) = \Gamma(T_\calI\circ X)
\]
for all $T_\calI\in\calG_\calI$ is sufficient.

\item
Because groups are finite linear automorphisms, each transformation $T$ is just a linear function and so Reynolds operator can be applied directly to the group actions
\[
\bar{T} = \frac{1}{|\calG|}\sum_{T\in\calG}T
\]
For continuous linear groups, orbit-average over a Haar measure $\lambda$
\[
\bar{T} = \int_\calG T\lambda(T)
\]
\todo: need to estimate the operator. Assume uniform Haar and sample?

\end{itemize}

\section{Kernel hypothesis test notes}

\begin{itemize}

\item
Kernel methods work on inner products of feature maps ($\phi:X\rightarrow\mathcal{H}$) of observations in the RKHS associated with kernel. Inner products may be computed without explicitly computing the high-dimensional feature map (``kernel trick'').

\item
Main challenge of designing kernel-based hypothesis tests is deriving large-sample distribution of test statistic under null.

\item
Gram matrix should be positive semidefinite. Satisfised if kernel is symmetric and positive semidefinite.

\item
Let $X$ be a r.v. with distribution $\mathbb{P}$. \href{https://en.wikipedia.org/wiki/Kernel_embedding_of_distributions}{Mean element} $\mu_\mathbb{P}$ associated with $X$ is unique element of RKHS $\mathcal{H}$ s.t. for all $f\in\mathcal{H}$,
\[
\langle\mu_\mathbb{P},f\rangle = \mathbb{E}_\mathbb{P}[f(X)]
\]
Covariance operator $\Sigma_\mathbb{P}:\mathcal{H}\times \mathcal{H}\rightarrow\mathbb{R}$ associated with $X$ is unique operator s.t. for all $f,g\in\mathcal{H}$,
\[
\langle f, \Sigma_\mathbb{P}g\rangle = \mathrm{Cov}(f(X),g(X)) = \mathbb{E}_\mathbb{P}[f(X),g(X)] - \langle\mu_\mathbb{P},f\rangle\langle\mu_\mathbb{P},g\rangle
\]
Empirical estimates of inner products that lead to estimates of element/operator are available.

\item
If $\mathrm{dim}(\mathcal{H}=\infty$, $\mu_\mathbb{P}$ has more significance than in classical statistics.

\item
Detecting (conditional?) invariances in single training environment via hypothesis testing. Explicitly testing for invariances? \href{https://www.sciencedirect.com/science/article/pii/S0047259X03000447}{Invariant testing}

\end{itemize}

\end{document}